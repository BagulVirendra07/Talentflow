{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\viren\\\\Trial 2\\\\src\\\\components\\\\Jobs\\\\JobsBoard.jsx\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport { useJobs, useReorderJob } from \"../../hooks/useData\";\nimport SortableJob from \"./so\";\nimport { DndContext, closestCenter } from \"@dnd-kit/core\";\nimport { arrayMove, SortableContext, verticalListSortingStrategy } from \"@dnd-kit/sortable\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function JobsBoard() {\n  _s();\n  const [items, setItems] = React.useState([]);\n  const {\n    data\n  } = useJobs({\n    page: 1,\n    pageSize: 25\n  });\n  const reorder = useReorderJob();\n  React.useEffect(() => {\n    if (data !== null && data !== void 0 && data.items) setItems(data.items);\n  }, [data]);\n  const handleDragEnd = event => {\n    const {\n      active,\n      over\n    } = event;\n    if (!over || active.id === over.id) return;\n    const oldIndex = items.findIndex(i => i.id === active.id);\n    const newIndex = items.findIndex(i => i.id === over.id);\n    const newItems = arrayMove(items, oldIndex, newIndex);\n    setItems(newItems);\n\n    // optimistic update with rollback\n    reorder.mutate({\n      id: active.id,\n      fromOrder: oldIndex,\n      toOrder: newIndex\n    }, {\n      onError: () => setItems(items) // rollback on failure\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Jobs Board\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DndContext, {\n      collisionDetection: closestCenter,\n      onDragEnd: handleDragEnd,\n      children: /*#__PURE__*/_jsxDEV(SortableContext, {\n        items: items.map(i => i.id),\n        strategy: verticalListSortingStrategy,\n        children: items.map(job => /*#__PURE__*/_jsxDEV(SortableJob, {\n          job: job\n        }, job.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 5\n  }, this);\n}\n_s(JobsBoard, \"YL/a7iTUskIuq8rBPC/kSXztQz8=\", false, function () {\n  return [useJobs, useReorderJob];\n});\n_c = JobsBoard;\nvar _c;\n$RefreshReg$(_c, \"JobsBoard\");","map":{"version":3,"names":["React","useJobs","useReorderJob","SortableJob","DndContext","closestCenter","arrayMove","SortableContext","verticalListSortingStrategy","jsxDEV","_jsxDEV","JobsBoard","_s","items","setItems","useState","data","page","pageSize","reorder","useEffect","handleDragEnd","event","active","over","id","oldIndex","findIndex","i","newIndex","newItems","mutate","fromOrder","toOrder","onError","children","fileName","_jsxFileName","lineNumber","columnNumber","collisionDetection","onDragEnd","map","strategy","job","_c","$RefreshReg$"],"sources":["C:/Users/viren/Trial 2/src/components/Jobs/JobsBoard.jsx"],"sourcesContent":["import React from \"react\";\r\nimport { useJobs, useReorderJob } from \"../../hooks/useData\";\r\nimport SortableJob from \"./so\";\r\nimport { DndContext, closestCenter } from \"@dnd-kit/core\";\r\nimport {\r\n  arrayMove,\r\n  SortableContext,\r\n  verticalListSortingStrategy,\r\n} from \"@dnd-kit/sortable\";\r\n\r\nexport default function JobsBoard() {\r\n  const [items, setItems] = React.useState([]);\r\n  const { data } = useJobs({ page: 1, pageSize: 25 });\r\n  const reorder = useReorderJob();\r\n\r\n  React.useEffect(() => {\r\n    if (data?.items) setItems(data.items);\r\n  }, [data]);\r\n\r\n  const handleDragEnd = (event) => {\r\n    const { active, over } = event;\r\n    if (!over || active.id === over.id) return;\r\n\r\n    const oldIndex = items.findIndex((i) => i.id === active.id);\r\n    const newIndex = items.findIndex((i) => i.id === over.id);\r\n\r\n    const newItems = arrayMove(items, oldIndex, newIndex);\r\n    setItems(newItems);\r\n\r\n    // optimistic update with rollback\r\n    reorder.mutate(\r\n      { id: active.id, fromOrder: oldIndex, toOrder: newIndex },\r\n      {\r\n        onError: () => setItems(items), // rollback on failure\r\n      }\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h3>Jobs Board</h3>\r\n      <DndContext collisionDetection={closestCenter} onDragEnd={handleDragEnd}>\r\n        <SortableContext\r\n          items={items.map((i) => i.id)}\r\n          strategy={verticalListSortingStrategy}\r\n        >\r\n          {items.map((job) => (\r\n            <SortableJob key={job.id} job={job} />\r\n          ))}\r\n        </SortableContext>\r\n      </DndContext>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}